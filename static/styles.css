:root {
  --blue-light: #e8f4fd;
  --blue-medium: #90caf9;
  --blue-normal: #1976d2;
  --blue-dark: #0d47a1;

  --green-light: #ecf7ed;
  --green-medium: #a5d6a7;
  --green-normal: #388e3c;
  --green-dark: #1b5e20;

  --red-light: #ffeef1;
  --red-medium: #ef9a9a;
  --red-normal: #d32f2f;
  --red-dark: #b71c1c;

  --yellow-light: #fffdeb;
  --yellow-medium: #fff59d;
  --yellow-normal: #fbc02d;
  --yellow-dark: #f57f17;

  --grey-light: #fbfbfb;
  --grey-medium: #eeeeee;
  --grey-normal: #616161;
  --grey-dark: #212121;
}

#root {
  height: 100%;
  font-family: "Atkinson Hyperlegible", sans-serif;
  font-size: 14px;
  padding: 10px;
}

.block {
  display: grid;
  grid-template-columns: auto 1fr;
  padding: 5px 5px 5px 7px;
  box-sizing: content-box;
  min-height: 15px;
  background: var(--grey-light);
  &:focus {
    background: var(--blue-light);
  }
}

.code,
.block,
.value {
  grid-column: 1 / 3;
}

.key + :is(.code, .block, .value) {
  grid-column: auto;
  border-left-width: 0;
}

.code,
.block,
.value,
.key {
  position: relative;
  outline: none;
  border: 1px solid #ddd;
  border-left-width: 5px;
  border-bottom-width: 0;
  > *:last-child,
  > .key:nth-last-child(2) {
    border-bottom-width: 1px;
    margin-bottom: 0 !important;
  }
  &:focus {
    z-index: 10;
    border-color: var(--blue-normal);
    border-bottom-width: 1px;
    margin-bottom: -1px;
  }
  &:has(:focus) {
    background: var(--blue-light);
  }
}

#root > .block {
  border-bottom-width: 1px;
}

.expr,
.value,
.key {
  padding: 2px 5px;

  background: white;
}

div:is(.expr, .value, .key) {
  box-sizing: content-box;
  min-height: 21px;
}

input:is(.expr, .value, .key) {
  background: var(--blue-light);
}

.key {
  display: block;
  background: #ddd;
  border-right-width: 0;
  &:focus {
    background: var(--blue-medium);
    border-right-width: 1px;
    margin-right: -1px;
  }
  &:has(+ :focus) {
    z-index: 10;
    background: var(--blue-medium);
    border-color: var(--blue-normal);
    border-bottom-width: 1px;
    margin-bottom: -1px;
  }
}

.code {
  .expr {
    border: 5px solid var(--green-light);
    border-bottom-width: 0;
  }
  input.expr {
    background: var(--green-light);
  }
  .result {
    .value {
      background: var(--green-light);
      border-width: 0;
    }
  }
  &:focus,
  &:has(:focus) {
    background: var(--green-medium);
    border-color: var(--green-normal);
    .expr {
      border-color: var(--green-medium);
    }
    .result {
      .value {
        background: var(--green-medium);
      }
    }
  }
  &.error {
    .expr {
      border-color: var(--red-light);
      border-bottom-width: 5px;
    }
    input.expr {
      background: var(--red-light);
    }
    &:focus,
    &:has(:focus) {
      background: var(--red-medium);
      border-color: var(--red-normal);
      .expr {
        border-color: var(--red-medium);
      }
    }
  }
}

.expr {
  outline: none;
}
